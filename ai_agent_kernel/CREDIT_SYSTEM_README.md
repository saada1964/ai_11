# ูุธุงู ุงูุดุญู ูุงูุฏูุน ุงูุฅููุชุฑููู - AI Agent Kernel

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุดุงูู ูุดุญู ุงูุฑุตูุฏ ูุงูุฏูุน ุงูุฅููุชุฑููู ููุธุงู AI Agent Kernel. ูุฏุนู ุงููุธุงู ุฃููุงุฏ ุงูุฎุตู ูุงูุฏูุน ุงูุฅููุชุฑููู ุนุจุฑ Stripe ู Plisio ู PayPalุ ูุน ุฅููุงููุงุช ูุชูุฏูุฉ ูุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช ูุงููุนุงููุงุช.

## ๐ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุธุงู ุฃููุงุฏ ุงูุดุญู
- โ ุฅูุดุงุก ุฃููุงุฏ ุดุญู ูุฎุตุตุฉ
- โ ุฃููุงุฏ ุจุญุฏ ุงุณุชุฎุฏุงู ูุญุฏูุฏ ุฃู ุบูุฑ ูุญุฏูุฏ
- โ ุฃููุงุฏ ุจุฎุตู ุฃู ุจุฏูู ุฎุตู
- โ ุฃููุงุฏ ุจุชุงุฑูุฎ ุงูุชูุงุก ุตูุงุญูุฉ
- โ ุฃููุงุฏ ุชุฑุญูุจูุฉ ูุจููุตุงุช

### 2. ุฃูุธูุฉ ุงูุฏูุน ุงูุฅููุชุฑููู
- ๐ณ **Stripe**: ุจุทุงูุงุช ุงุฆุชูุงููุฉ (Visa, Mastercard, Amex)
- ๐ฐ **Plisio**: ุนููุงุช ุฑูููุฉ (BTC, ETH, LTC, USDT)
- ๐ต **PayPal**: ูุญุงูุธ ุฅููุชุฑูููุฉ

### 3. ุฅุฏุงุฑุฉ ุงููุนุงููุงุช
- ๐ ุชุชุจุน ุฌููุน ุงููุนุงููุงุช
- ๐ฐ ุฃููุงุน ูุฎุชููุฉ: purchase, credit_code, topup, refund
- โฐ ุญุงูุฉ ุงููุนุงููุฉ: pending, completed, failed, refunded

### 4. ูุธุงู ุงูุงุดุชุฑุงูุงุช
- ๐ ุงุดุชุฑุงูุงุช ุดูุฑูุฉ
- ๐ ุชุฌุฏูุฏ ุชููุงุฆู
- ๐ณ ุฑุจุท ุจุทุงูุงุช ุงูุฏูุน

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ:
1. **credit_codes** - ุฃููุงุฏ ุงูุดุญู
2. **credit_transactions** - ูุนุงููุงุช ุงูุดุญู
3. **payment_methods** - ุทุฑู ุงูุฏูุน
4. **payment_records** - ุณุฌู ุงูุฏูุนุงุช
5. **subscriptions** - ุงูุงุดุชุฑุงูุงุช

### ุงูุฌุฏุงูู ุงููุญุฏุซุฉ:
- **users** - ุฅุถุงูุฉ ุฑุตูุฏ (balance)

## ๐ ูููุงุช ุงููุธุงู

### ุงูููุงุฐุฌ (Models)
- `/models/credit_models.py` - ููุงุฐุฌ ูุธุงู ุงูุดุญู
- `/models/__init__.py` - ุชุญุฏูุซ ูุงุณุชูุฑุงุฏ ุงูููุงุฐุฌ ุงูุฌุฏูุฏุฉ

### ุงูุฎุฏูุงุช (Services)
- `/services/credit_service.py` - ุฎุฏูุฉ ุงูุดุญู ูุงูุฏูุน
  - `CreditService` - ุฅุฏุงุฑุฉ ุฃููุงุฏ ุงูุดุญู
  - `PaymentService` - ุฅุฏุงุฑุฉ ุนูููุงุช ุงูุฏูุน

### ุงููุฎุทุทุงุช (Schemas)
- `/schemas/credit_schemas.py` - ูุฎุทุทุงุช ุงูุจูุงูุงุช

### ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (APIs)
- `/api/credit_api.py` - ููุงุท ุงูููุงูุฉ ููู APIs

### Migration Scripts
- `/migrations/sqlite_credit_migration.py` - ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช SQLite
- `/migrations/credit_migration.py` - Migration PostgreSQL

### ุงูุงุฎุชุจุงุฑุงุช
- `/test_credit_simple.py` - ุงุฎุชุจุงุฑ ุจุณูุท
- `/test_credit_system.py` - ุงุฎุชุจุงุฑุงุช ุดุงููุฉ

## ๐๏ธ ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ
```bash
pip install sqlalchemy psycopg2-binary python-dotenv pydantic-settings pytest
```

### 2. ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
cd ai_agent_kernel
python migrations/sqlite_credit_migration.py
```

### 3. ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
```bash
python test_credit_simple.py
```

## ๐ฏ ุฃููุงุฏ ุงูุดุญู ุงููุชุงุญุฉ

### ุงูุฃููุงุฏ ุงูุชุฌุฑูุจูุฉ:
| ุงูููุฏ | ุงูุงุณู | ุงููุจูุบ | ุงูุงุณุชุฎุฏุงูุงุช | ููุชูู |
|-------|-------|--------|-------------|-------|
| WELCOME100 | ููุฏ ุชุฑุญูุจู | 1000 ูุญุฏุฉ | 100/100 | 2025-12-01 |
| BONUS500 | ุจููุต 500 ูุญุฏุฉ | 500 ูุญุฏุฉ | 0/50 | 2025-12-31 |
| RESEARCH20 | ุฎุตู 20% ุนูู ุงูุจุญุซ | 200 ูุญุฏุฉ | 0/25 | 2025-12-16 |
| VIP1000 | ููุฏ VIP | 1000 ูุญุฏุฉ | 0/10 | 2026-01-30 |

## ๐ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (APIs)

### ุฅุฏุงุฑุฉ ุฃููุงุฏ ุงูุดุญู
```http
POST /credit/codes
# ุฅูุดุงุก ููุฏ ุดุญู ุฌุฏูุฏ

POST /credit/codes/redeem
# ุงุณุชุฎุฏุงู ููุฏ ุดุญู

GET /credit/codes
# ูุงุฆูุฉ ุฃููุงุฏ ุงูุดุญู

GET /credit/codes/{code_id}
# ุชูุงุตูู ููุฏ ุดุญู
```

### ุงููุนุงููุงุช ูุงูุฅุญุตุงุฆูุงุช
```http
GET /credit/statistics
# ุฅุญุตุงุฆูุงุช ุงููุธุงู

GET /credit/transactions
# ูุนุงููุงุช ุงููุณุชุฎุฏู
```

### ุงูุฏูุน ุงูุฅููุชุฑููู
```http
POST /credit/payments/initialize
# ุจุฏุก ุนูููุฉ ุฏูุน

POST /credit/payments/complete
# ุฅุชูุงู ุนูููุฉ ุฏูุน

GET /credit/payment-methods
# ุทุฑู ุงูุฏูุน ุงููุชุงุญุฉ
```

### ุฅุฏุงุฑุฉ ุงูุฑุตูุฏ
```http
GET /credit/balance/{user_id}
# ุฑุตูุฏ ุงููุณุชุฎุฏู

POST /credit/balance/topup
# ุดุญู ุงูุฑุตูุฏ (ูููุฏูุฑูู)
```

### ุงูุงุดุชุฑุงูุงุช
```http
POST /credit/subscriptions
# ุฅูุดุงุก ุงุดุชุฑุงู

GET /credit/subscriptions/{user_id}
# ุงุดุชุฑุงูุงุช ุงููุณุชุฎุฏู
```

## ๐ ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู

### 1. ุงุณุชุฎุฏุงู ููุฏ ุดุญู
```python
from services.credit_service import credit_service

result = credit_service.redeem_credit_code(
    db=session,
    code="WELCOME100",
    user_id=1
)

if result["success"]:
    print(f"ุชู ุดุญู {result['data']['amount']} ูุญุฏุฉ")
    print(f"ุงูุฑุตูุฏ ุงูุฌุฏูุฏ: {result['data']['new_balance']}")
```

### 2. ุจุฏุก ุนูููุฉ ุฏูุน
```python
from services.credit_service import payment_service

result = payment_service.initialize_payment(
    db=session,
    user_id=1,
    amount_usd=50.0,
    payment_method="stripe"
)

if result["success"]:
    print(f"ูุนุฑู ุงููุนุงููุฉ: {result['data']['transaction_id']}")
    print(f"ุงููุจูุบ: ${result['data']['amount_usd']}")
```

### 3. ุฅุชูุงู ุนูููุฉ ุฏูุน
```python
result = payment_service.complete_payment(
    db=session,
    payment_record_id=123,
    external_payment_id="pi_123456",
    status="succeeded"
)
```

## ๐ง ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ (.env)
```env
# Database
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/ai_agent_kernel
DATABASE_URL_SYNC=postgresql://user:password@localhost:5432/ai_agent_kernel

# API Keys (ููุชูุงูู ูุน Stripe/Plisio)
STRIPE_API_KEY=sk_test_...
PLISIO_API_KEY=your_plisio_key

# Security
SECRET_KEY=your-secret-key-here
```

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุงููุธุงู
```bash
# ุงุฎุชุจุงุฑ ุจุณูุท
python test_credit_simple.py

# ุงุฎุชุจุงุฑ ุดุงูู ูุน pytest
pytest test_credit_system.py -v
```

### ุงููุชุงุฆุฌ ุงููุชููุนุฉ
```
โ ุนุฏุฏ ุงููุณุชุฎุฏููู: 2
โ ุนุฏุฏ ุฃููุงุฏ ุงูุดุญู: 4
โ ุนุฏุฏ ุทุฑู ุงูุฏูุน: 3
โ ุนุฏุฏ ุงููุนุงููุงุช: 2
โ ุชู ุงุฎุชุจุงุฑ ูุธุงู ุงูุดุญู ุจูุฌุงุญ!
```

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงููุชุงุจุนุฉ

### ุฅุญุตุงุฆูุงุช ุงููุธุงู
- ุนุฏุฏ ุงูุฃููุงุฏ ุงููุดุทุฉ/ุงูููุชููุฉ
- ูุนุฏู ุงูุงุณุชุฎุฏุงู
- ุฃูุซุฑ ุงูุฃููุงุฏ ุงุณุชุฎุฏุงูุงู
- ุฅุฌูุงูู ุงููุนุงููุงุช

### ุชูุงุฑูุฑ ุงููุณุชุฎุฏููู
- ุชุงุฑูุฎ ุงููุนุงููุงุช
- ุงูุฃุฑุตุฏุฉ ุงูุญุงููุฉ
- ุทุฑู ุงูุฏูุน ุงููุณุชุฎุฏูุฉ
- ุงูุงุดุชุฑุงูุงุช ุงููุดุทุฉ

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### ูุณุชููุงุช ุงูุตูุงุญูุงุช
- **ุงููุณุชุฎุฏููู**: ุงุณุชุฎุฏุงู ุฃููุงุฏ ุงูุดุญูุ ุนุฑุถ ุฑุตูุฏูู
- **ุงููุฏูุฑูู**: ุฅูุดุงุก ุฃููุงุฏุ ุดุญู ุฃุฑุตุฏุฉุ ุฅุฏุงุฑุฉ ุทุฑู ุงูุฏูุน
- **ุงููุดุฑููู**: ุฅุฏุงุฑุฉ ูุงููุฉ ูููุธุงู

### ุงูุฃูุงู
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ููุน ุงุณุชุฎุฏุงู ุฃููุงุฏ ููุชููุฉ ุงูุตูุงุญูุฉ
- ุชุณุฌูู ุฌููุน ุงูุนูููุงุช
- ููุงุฑุณ ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฃุฏุงุก

## ๐จ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุฎุทุฃ: "ููุฏ ุงูุดุญู ุบูุฑ ููุฌูุฏ"
- ุชุฃูุฏ ูู ุตุญุฉ ุงูููุฏ
- ุชุญูู ูู ุฃู ุงูููุฏ ูุดุท ูุบูุฑ ููุชูู ุงูุตูุงุญูุฉ

### ุฎุทุฃ: "ุงูุญุฏ ุงูุฃูุตู ููุงุณุชุฎุฏุงู"
- ุชู ุงุณุชุฎุฏุงู ุงูููุฏ ุงูุญุฏ ุงูุฃูุตู ุงููุณููุญ
- ุฌุฑุจ ููุฏ ุขุฎุฑ

### ุฎุทุฃ: "ุทุฑููุฉ ุงูุฏูุน ุบูุฑ ูุฏุนููุฉ"
- ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู ุทุฑููุฉ ุฏูุน ุตุญูุญุฉ
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงููุธุงู

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### ูุฎุทุท ุงูุชุทููุฑ
- [ ] ุชูุงูู ูุน Stripe/Plisio APIs
- [ ] ูุธุงู ุฅุดุนุงุฑุงุช ุงูุฏูุน
- [ ] ุชูุงุฑูุฑ ูุงููุฉ ูุชูุฏูุฉ
- [ ] ูุธุงู ููุงุก ุงูุนููุงุก
- [ ] ุชุทุจูู mobile
- [ ] ูุงุฌูุฉ ููุจ ุฅุฏุงุฑูุฉ

## ๐ ุงูุฏุนู ูุงูุชูุงุตู

ููุญุตูู ุนูู ุงูุฏุนู ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
- ุฑุงุฌุน ููู ุงูุงุฎุชุจุงุฑุงุช
- ุชุญูู ูู logs ุงููุธุงู
- ุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ**: MiniMax Agent  
**ุงูุฅุตุฏุงุฑ**: 1.0.0  
**ุชุงุฑูุฎ ุงูุชุญุฏูุซ**: 2025-11-01

๐ **ุชู ุจูุฌุงุญ ุฅูุดุงุก ูุชูุนูู ูุธุงู ุงูุดุญู ูุงูุฏูุน ุงูุฅููุชุฑููู!**